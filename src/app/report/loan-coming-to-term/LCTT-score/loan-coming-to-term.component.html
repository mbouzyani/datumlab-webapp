
<div class="row btns-row" *ngIf="!isSummarize">
  <div class="row main-btns-select">
    <div class="select-container-112">
      <mat-form-field>
        <mat-label class="select_title">Score</mat-label>
        <mat-select [formControl]="scoreForm" panelClass="mat-select-panel" multiple>
          <mat-select-trigger>
            {{scoreForm.value ? scoreForm.value[0] : ''}}
            <span *ngIf="scoreForm.value?.length > 1" class="example-additional-selection">
              (+{{scoreForm.value.length - 1}} {{scoreForm.value?.length === 2 ? 'autre' : 'autres'}})
            </span>
          </mat-select-trigger>
          <mat-option 
            *ngFor="let score of scoreListForm" 
            [value]="score"
            [disabled]="scoreForm.value.length==1 && scoreForm.value[0]==score" 
            (click)="scoreForm.value.length==1 && scoreForm.value[0]==score ?  '' : hideScore(); ">
            {{score}}
          </mat-option>
        </mat-select>
      </mat-form-field> 
    </div>

    <div class="select-container-112">
      <mat-form-field>
        <mat-label class="select_title">Mois</mat-label>
        <mat-select [formControl]="monthForm" panelClass="mat-select-panel" multiple>
          <mat-select-trigger>
            {{monthForm.value ? monthForm.value[0] : ''}}
            <span *ngIf="monthForm.value?.length > 1" class="example-additional-selection">
              (+{{monthForm.value.length - 1}} {{monthForm.value?.length === 2 ? 'autre' : 'autres'}})
            </span>
          </mat-select-trigger>
          <mat-option 
            *ngFor="let month of monthListForm" 
            [value]="month"  
            [disabled]="monthForm.value.length==1 && monthForm.value[0]==month" 
            (click)="monthForm.value.length==1 && monthForm.value[0]==month ?  '' : hideMonth(); "
          >
            {{month}}
          </mat-option>
        </mat-select>
      </mat-form-field> 
    </div>

    <div class="select-container-112">
      <mat-form-field>
        <mat-label class="select_title">Capacité</mat-label>
        <mat-select [formControl]="capacityForm" panelClass="mat-select-panel" multiple>
          <mat-select-trigger>
            {{capacityForm.value ? capacityForm.value[0] : ''}}
            <span *ngIf="capacityForm.value?.length > 1" class="example-additional-selection">
              (+{{capacityForm.value.length - 1}} {{capacityForm.value?.length === 2 ? 'autre' : 'autres'}})
            </span>
          </mat-select-trigger>
          <mat-option 
            *ngFor="let capacity of capacityListForm" 
            [value]="capacity"  
            [disabled]="capacityForm.value.length==1 && capacityForm.value[0]==capacity" 
            (click)="capacityForm.value.length==1 && capacityForm.value[0]==capacity ?  '' : requestData(); "
          >
            {{capacity == '35' ? 'inférieur à 35' : capacity == '45' ? 'supérieur à 45' : 'entre 35 et 45'}}</mat-option>
          </mat-select> 
      </mat-form-field> 
    </div>

    <div class="select-container-112">
      <mat-form-field>
        <mat-label class="select_title">Région</mat-label>
        <mat-select [formControl]="regionForm" panelClass="mat-select-panel" multiple>
          <mat-select-trigger>
            {{regionForm.value ? regionForm.value[0] : ''}}
            <span *ngIf="regionForm.value?.length > 1" class="example-additional-selection">
              (+{{regionForm.value.length - 1}} {{regionForm.value?.length === 2 ? 'autre' : 'autres'}})
            </span>
          </mat-select-trigger>
          <mat-option 
            *ngFor="let region of regionListForm" 
            [value]="region"  
            [disabled]="regionForm.value.length==1 && regionForm.value[0]==region" 
            (click)="regionForm.value.length==1 && regionForm.value[0]==region ?  '' : requestData(); "
          >
            {{region}}
          </mat-option>
        </mat-select>
      </mat-form-field> 
    </div>

    <div class="select-container-112">
      <form class="example-form " style="display: flex; flex-direction: row;align-items: center;">
        
        <mat-form-field class="example-full-width">
          <input 
                type="text"
                placeholder="Choisir une ville"
                aria-label="Number"
                matInput
                [formControl]="cityForm"
                [matAutocomplete]="auto"
                >
          <mat-autocomplete #auto="matAutocomplete">
            <mat-option *ngFor="let option of filteredOptions | async" [value]="option" (click)="requestData();">
              {{option}}
            </mat-option>
          </mat-autocomplete>
        </mat-form-field>
        <mat-icon style="font-size: 15px; cursor: pointer;" (click)="clearCity();">close</mat-icon>
      </form>
    </div>
  </div>
  <div class="row">
    <div class="btn-share">
      <button mat-raised-button color="Basic" 
            style="display: flex; align-items: center;" 
            (click)="email.showPopupEmail()">
        <mat-icon style="font-size: 20px;">share</mat-icon>
        Partager
      </button>
    </div>
    <div class="btn-export">
      <button mat-raised-button color="primary" 
              style="display: flex; align-items: center;"
              (click)="exportList();"
      >
        <mat-icon style="font-size: 20px;">save_alt</mat-icon>
        Export
      </button>
    </div>
  </div>
</div>

<div id="bar-chart" [ngClass]="{'height_68vh': !isSummarize, 'height_100': isSummarize}"></div>

<app-email-report #email title='Rapport e-mail:  Crédit arrivant à échéance, Distribution par type de score' ></app-email-report>